<header class="site-header">
  <div class="wrapper">
    <a class="site-logo" href="{{ "/" | relLangURL }}">
      <img alt="{{ site.Title }}" src="{{ "images/papagamedev_logo_web.png" | relURL }}" width="300"/>
    </a>
    
    <!-- Hamburger menu button -->
    <button class="hamburger" id="hamburger" aria-label="Toggle navigation">
      <span></span>
      <span></span>
      <span></span>
    </button>
    
    <nav class="site-nav" id="site-nav">
      <ul class="nav-links">
        {{ range site.Menus.main }}
          <li>
            <a href="{{ .URL | relLangURL }}"{{ if $.IsMenuCurrent "main" . }} class="active"{{ end }}>
              {{ .Name }}
            </a>
          </li>
        {{ end }}
        
        <!-- Theme switcher -->
        <li class="theme-toggle-item">
          <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
            <svg class="theme-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <!-- Sun icon (shown in dark mode) -->
              <circle class="sun-icon" cx="12" cy="12" r="5"></circle>
              <line class="sun-icon" x1="12" y1="1" x2="12" y2="3"></line>
              <line class="sun-icon" x1="12" y1="21" x2="12" y2="23"></line>
              <line class="sun-icon" x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line class="sun-icon" x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line class="sun-icon" x1="1" y1="12" x2="3" y2="12"></line>
              <line class="sun-icon" x1="21" y1="12" x2="23" y2="12"></line>
              <line class="sun-icon" x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line class="sun-icon" x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              <!-- Moon icon (shown in light mode) -->
              <path class="moon-icon" d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </button>
          <div class="theme-menu" id="theme-menu">
            <button class="theme-option" data-theme="light">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
              <span>Light</span>
            </button>
            <button class="theme-option" data-theme="dark">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
              </svg>
              <span>Dark</span>
            </button>
            <button class="theme-option" data-theme="system">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                <line x1="8" y1="21" x2="16" y2="21"></line>
                <line x1="12" y1="17" x2="12" y2="21"></line>
              </svg>
              <span>System</span>
            </button>
          </div>
        </li>
        
        <!-- Language toggle as part of nav -->
        <li class="lang-toggle-item">
          {{/* Show current language flag, link to translation */}}
          {{ if .IsTranslated }}
            {{ range .Translations }}
              <a href="{{ .Permalink }}" title="{{ .Language.LanguageName }}" class="lang-link">
                <img src="{{ (printf "images/flag-%s.svg" (cond (eq $.Lang "en") "english" "spanish")) | relURL }}" alt="{{ $.Language.LanguageName }}" class="flag-icon" />
              </a>
            {{ end }}
          {{ else }}
            {{/* Link to home of other language if no translation exists, but show current language flag */}}
            {{ if eq .Lang "es" }}
              <a href="/en/" title="English" class="lang-link">
                <img src="{{ "images/flag-spanish.svg" | relURL }}" alt="Español" class="flag-icon" />
              </a>
            {{ else }}
              <a href="/" title="Español" class="lang-link">
                <img src="{{ "images/flag-english.svg" | relURL }}" alt="English" class="flag-icon" />
              </a>
            {{ end }}
          {{ end }}
        </li>
      </ul>
    </nav>
  </div>
</header>
