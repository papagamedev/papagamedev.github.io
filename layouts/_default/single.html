{{ define "main" }}

<article class="post">
  <header class="post-header">
    <h1 class="post-title">{{ .Title }}</h1>
    
    <p class="post-meta">
      <time datetime="{{ .Date.Format "2006-01-02" }}">
        {{ if eq .Lang "es" }}
          {{ .Date.Day }} de {{ index (slice "enero" "febrero" "marzo" "abril" "mayo" "junio" "julio" "agosto" "septiembre" "octubre" "noviembre" "diciembre") (sub .Date.Month 1) }} de {{ .Date.Year }}
        {{ else }}
          {{ .Date.Format "January 2, 2006" }}
        {{ end }}
      </time>
      {{ with .Params.author }}
        • {{ . }}
      {{ end }}
    </p>
    
    <!-- Categories -->
    {{ with .Params.categories }}
      <div class="post-categories">
        {{ range . }}
          <a href="{{ "/category/" | relLangURL }}{{ . | urlize }}/" class="category-link">{{ . }}</a>
        {{ end }}
      </div>
    {{ end }}
    
    <!-- Translation link -->
    {{ if .IsTranslated }}
      <div class="translation-notice">
        {{ range .Translations }}
          <a href="{{ .Permalink }}"><img src="{{ (printf "images/flag-%s.svg" (cond (eq .Lang "en") "english" "spanish")) | relURL }}" alt="{{ .Language.LanguageName }}" class="flag-icon-inline" /></a>
          {{ if eq $.Lang "es" }}
            También puedes leer este artículo en <a href="{{ .Permalink }}">English</a>
          {{ else }}
            You can also read this article in <a href="{{ .Permalink }}">Español</a>
          {{ end }}
        {{ end }}
      </div>
    {{ end }}
  </header>
  
  <div class="post-content">
    {{ .Content }}
  </div>
  
  <footer class="post-footer">
    <!-- Author bio -->
    {{ partial "author-bio.html" . }}
    
    <!-- Related posts -->
    {{ partial "related-posts.html" . }}
    
    <!-- Comments -->
    {{ partial "comments.html" . }}
  </footer>
</article>
{{ end }}
